<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#000000" />
  <title>cope</title>
  <style>
    :root{
      --bg:#000;
      --fg:#e9e9e9;
      --muted:#9a9a9a;
    }
    html,body{height:100%;}
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
      overflow:hidden;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      cursor:none; /* we draw our own */
    }

    /* Center word */
    #wrap{ 
      position:relative;
      text-align:center;
      padding:24px;
    }
    #word{
      font-size: clamp(64px, 12vw, 140px);
      letter-spacing: 0.02em;
      text-transform: lowercase;
      opacity:0.95;

      /* intentionally a little ‚Äúbad‚Äù */
      filter: contrast(1.1) brightness(0.95);
      transform: translateZ(0);
    }
    #hint{
      margin-top:12px;
      font-size:14px;
      color:var(--muted);
      opacity:0.55;
    }
    #footer{
      position:fixed;
      left:0;
      right:0;
      bottom:16px;
      text-align:center;
      font-size:12px;
      color:var(--muted);
      opacity:0.35;
      pointer-events:none;
    }

    /* Modal-ish message */
    #toast{
      position:fixed;
      left:50%;
      top:50%;
      transform:translate(-50%,-50%) scale(0.98);
      background: rgba(10,10,10,0.82);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius:18px;
      padding:18px 18px;
      min-width:min(520px, calc(100vw - 56px));
      max-width: 720px;
      box-shadow: 0 18px 80px rgba(0,0,0,0.55);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      opacity:0;
      pointer-events:none;
      transition: opacity 160ms ease, transform 160ms ease;
    }
    #toast.show{
      opacity:1;
      pointer-events:none;
      transform:translate(-50%,-50%) scale(1);
    }
    #toastText{
      font-size: clamp(18px, 2.6vw, 26px);
      line-height:1.25;
      color:var(--fg);
      letter-spacing:0.01em;
    }
    #toastSub{
      margin-top:10px;
      font-size:12px;
      color:var(--muted);
      opacity:0.65;
    }

    /* Grain overlay */
    #grain{
      pointer-events:none;
      position:fixed;
      inset:-60px;
      opacity:0.14;
      background-image:url('data:image/svg+xml;utf8,\
<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160">\
<filter id="n">\
  <feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="3" stitchTiles="stitch"/>\
</filter>\
<rect width="160" height="160" filter="url(%23n)" opacity="0.55"/>\
</svg>');
      mix-blend-mode: overlay;
      animation: grainMove 2.8s steps(2) infinite;
    }
    @keyframes grainMove{
      0%{ transform: translate(0,0) }
      25%{ transform: translate(-10px, 8px) }
      50%{ transform: translate(8px, -12px) }
      75%{ transform: translate(-6px, -6px) }
      100%{ transform: translate(0,0) }
    }

    /* Vignette */
    #vignette{
      pointer-events:none;
      position:fixed;
      inset:0;
      background: radial-gradient(ellipse at center,
        rgba(0,0,0,0) 40%,
        rgba(0,0,0,0.55) 100%);
    }

    /* Custom cursor (pill) */
    #cursor{
      position:fixed;
      width:28px;
      height:28px;
      left:0;
      top:0;
      transform: translate(-999px,-999px);
      pointer-events:none;
      z-index:9999;
      opacity:0.9;
      filter: drop-shadow(0 8px 22px rgba(0,0,0,0.6));
    }

    /* Small hidden corner target */
    #corner{
      position:fixed;
      right:0;
      bottom:0;
      width:24px;
      height:24px;
      opacity:0;
    }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      #grain{ animation:none; }
      #toast{ transition:none; }
    }
  </style>
</head>
<body>
  <div id="grain"></div>
  <div id="vignette"></div>

  <!-- custom pill cursor -->
  <svg id="cursor" viewBox="0 0 64 64" aria-hidden="true">
    <defs>
      <linearGradient id="g" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0" stop-color="#d9d9d9" stop-opacity="0.95"/>
        <stop offset="1" stop-color="#9b9b9b" stop-opacity="0.85"/>
      </linearGradient>
    </defs>
    <g opacity="0.95">
      <rect x="10" y="18" rx="16" ry="16" width="44" height="28" fill="url(#g)"/>
      <path d="M32 18 v28" stroke="rgba(0,0,0,0.35)" stroke-width="2" />
      <rect x="10" y="18" rx="16" ry="16" width="44" height="28" fill="none" stroke="rgba(255,255,255,0.08)" stroke-width="2"/>
    </g>
  </svg>

  <div id="wrap">
    <div id="word">cope</div>
    <div id="hint">ca: not live yet..</div>
  </div>

  <div id="toast" role="status" aria-live="polite">
    <div id="toastText"></div>
    <div id="toastSub"></div>
  </div>

  <div id="footer">not financial advice</div>
  <div id="corner" title=""></div>

  <script>
    // ====== Copy / prompts ======
    const LINES = [
      "it‚Äôs okay.",
      "this is normal.",
      "close the chart.",
      "drink water. touch grass.",
      "you‚Äôre still early (emotionally).",
      "still holding.",
      "still believing.",
      "zoom out. then log out.",
      "red candles build character.",
      "your wallet is not your worth.",
      "the market can‚Äôt hurt you if you don‚Äôt look.",
      "bought the top. again. impressive.",
      "sell? buy? neither will fix it.",
      "your thesis is intact (delusionally).",
      "tomorrow you will pretend this didn‚Äôt happen."
    ];

    // Some ‚Äúrarer‚Äù lines (easter eggs can pull from here)
    const RARE = [
      "congrats. you found the bottom (emotionally).",
      "doctor prescribed 200mg $cope daily.",
      "your conviction is a medical condition.",
      "we cope in public now.",
      "vibes stable. wallet unstable.",
      "the chart is just a suggestion."
    ];

    const toast = document.getElementById("toast");
    const toastText = document.getElementById("toastText");
    const toastSub  = document.getElementById("toastSub");
    const word = document.getElementById("word");
    const hint = document.getElementById("hint");
    const corner = document.getElementById("corner");

    // ====== Helpers ======
    const rand = (arr) => arr[Math.floor(Math.random() * arr.length)];
    const chance = (p) => Math.random() < p;

    let toastTimer = null;
    function showToast(msg, sub=""){
      toastText.textContent = msg;
      toastSub.textContent = sub;
      toast.classList.add("show");
      clearTimeout(toastTimer);
      toastTimer = setTimeout(() => toast.classList.remove("show"), 2300);
    }

    function primaryClick(){
      // 7% chance to show a ‚Äúrare‚Äù line
      const msg = chance(0.07) ? rand(RARE) : rand(LINES);
      showToast(msg, "");
    }

    // ====== Custom cursor tracking ======
    const cursor = document.getElementById("cursor");
    let lastMove = 0;
    window.addEventListener("mousemove", (e) => {
      lastMove = Date.now();
      cursor.style.transform = `translate(${e.clientX - 14}px, ${e.clientY - 14}px)`;
    }, {passive:true});

    // On touch devices, show system cursor behavior (we keep cursor hidden anyway)
    window.addEventListener("touchstart", () => {
      // If user touches, we don't need custom cursor visibility cues.
    }, {passive:true});

    // ====== Main interaction ======
    window.addEventListener("click", (e) => {
      // If they click the hidden corner, run that easter egg
      if (e.target === corner) return;
      primaryClick();
    });

    window.addEventListener("touchend", () => primaryClick(), {passive:true});

    // ====== Easter Egg #1: Konami code ======
    const KONAMI = ["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];
    let kIdx = 0;
    window.addEventListener("keydown", (e) => {
      const key = e.key;
      const expected = KONAMI[kIdx];
      if (key === expected || key.toLowerCase() === expected){
        kIdx++;
        if (kIdx === KONAMI.length){
          kIdx = 0;
          showToast("unlocked: premium cope üíä", "you pressed the sacred sequence");
          // subtle visual change: wobble hint text
          hint.textContent = "premium coping enabled";
          hint.style.opacity = "0.7";
        }
      } else {
        kIdx = 0;
      }
    });

    // ====== Easter Egg #2: Triple-click the word ======
    let clickCount = 0;
    let clickWindow = null;
    word.addEventListener("click", (e) => {
      e.stopPropagation();
      clickCount++;
      clearTimeout(clickWindow);
      clickWindow = setTimeout(() => clickCount = 0, 420);
      if (clickCount >= 3){
        clickCount = 0;
        showToast("still holding.", "triple-click detected");
        // tiny ‚Äújpeg artifact‚Äù effect by toggling contrast
        word.style.filter = "contrast(1.35) brightness(0.9)";
        setTimeout(() => word.style.filter = "contrast(1.1) brightness(0.95)", 700);
      } else {
        primaryClick();
      }
    });

    // ====== Easter Egg #3: Type ‚Äúcope‚Äù anywhere ======
    let buffer = "";
    const MAX = 8;
    window.addEventListener("keydown", (e) => {
      if (e.key.length !== 1) return;
      buffer = (buffer + e.key.toLowerCase()).slice(-MAX);
      if (buffer.includes("cope")){
        buffer = "";
        showToast("you said the word.", "cope accepted");
      }
    });

    // ====== Easter Egg #4: Long-press (mobile) ======
    let pressTimer = null;
    window.addEventListener("touchstart", () => {
      clearTimeout(pressTimer);
      pressTimer = setTimeout(() => {
        showToast("deep coping mode.", "hold detected");
      }, 650);
    }, {passive:true});
    window.addEventListener("touchend", () => clearTimeout(pressTimer), {passive:true});
    window.addEventListener("touchcancel", () => clearTimeout(pressTimer), {passive:true});

    // ====== Easter Egg #5: Secret corner click ======
    // Click bottom-right invisible square 5 times
    let cornerHits = 0;
    let cornerTimer = null;
    corner.addEventListener("click", (e) => {
      e.stopPropagation();
      cornerHits++;
      clearTimeout(cornerTimer);
      cornerTimer = setTimeout(() => cornerHits = 0, 900);
      if (cornerHits >= 5){
        cornerHits = 0;
        showToast("you found the exit.", "close the chart. close the app.");
        document.title = "still holding";
      } else {
        showToast("‚Ä¶", "");
      }
    });

  </script>
</body>
</html>
